<html>
<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});

    // This is simply the "first user click on Search" initializer,
    // initializing the arrays once to the first static data row.
  
      var titlesArray = ["Year"];
      var Array1900s  = ["1900"];
      var Array1910s  = ["1910"];
      var Array1920s  = ["1920"];
      var Array1930s  = ["1930"];
      var Array1940s  = ["1940"];
      var Array1950s  = ["1950"];
      var Array1960s  = ["1960"];
      var Array1970s  = ["1970"];
      var Array1980s  = ["1980"];
      var Array1990s  = ["1990"];
      var Array2000s  = ["2000"];
    
    
      var savedData = <%= settings.dataArray %>

      for (let data of savedData)
      {
        titlesArray.push(data[0]);
        Array1900s.push(data[1]);
        Array1910s.push(data[2]);
        Array1920s.push(data[3]);
        Array1930s.push(data[4]);
        Array1940s.push(data[5]);
        Array1950s.push(data[6]);
        Array1960s.push(data[7]);
        Array1970s.push(data[8]);
        Array1980s.push(data[9]);
        Array1990s.push(data[10]);
        Array2000s.push(data[11]);
      }


    google.charts.setOnLoadCallback(drawChart);


    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        titlesArray,
        Array1900s,
        Array1910s,
        Array1920s,
        Array1930s,
        Array1940s,
        Array1950s,
        Array1960s,
        Array1970s,
        Array1980s,
        Array1990s,
        Array2000s
      ]);

      var options = {
        title: 'Name Frequency',
        curveType: 'function',
        legend: {position: 'bottom'},
        vAxis: {  direction: -1,
                  viewWindow: {
                    min: 0,
                    max: 1100
                  },
                  ticks: [0, 200, 400,  600,  800, 1000]
                }
      };

      var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

      chart.draw(data, options);
      dataExists = true;
    }

  </script>
</head>
<body>
<p> You submitted <%= @name %> </p>
     <div id="curve_chart" style="width: 900px; height: 500px"></div>
     </body>
     </html>
